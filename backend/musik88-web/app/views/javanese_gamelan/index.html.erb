<% content_for :meta_head do %>
  <title><%= @meta_title %></title>
  <meta name="description" content="<%= @meta_description %>">
  <meta property="og:title" content="<%= @meta_title %>" />
  <meta property="og:description" content="<%= @meta_description %>" />
  <meta property="og:url" content="<%= javanese_gamelan_url %>" />
<% end %>
<% content_for :breadcrumb do %>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "<%= root_url %>",
          "name": "<%= t("site_name") %>"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "<%= javanese_gamelan_url %>",
          "name": "<%= t("nav_javanese_gamelan") %>"
        }
      }]
    }
  </script>
<% end %>
<div class="row">
  <div class="col-md-8">
    <div class="bluebox-heading">
      <h2><%= @page.title if @page %></h2>
      <div class="lead">
        <%= raw @page.page_content if @page %>
      </div>
    </div>
    <div class="bluebox-heading">
      <h3><%= t("our_javanese_gending_notation") %></h3>
    </div>
    <% @gendings.each_with_index do |gending, index| %>
      <% if (index == 0 || index % 2 == 0) %>
        <div class="row content-row">
        <% end %>
        <div class="col-md-6">
          <section class="featured-post">
            <a class="image-wrap" href="<%= javanese_gending_detail_path("gending-notation-" + gending.name.downcase.parameterize + "-" + gending.id.to_s) %>">
              <%= image_pack_tag("image-placeholder-#{rand(0...3)}.jpg", alt:"#{gending.name} cover image.", style:"width:267px;height:165px;") %>
              <span class="image-details"></span>
            </a>
            <h1>
              <%= link_to gending.name,
                            javanese_gending_detail_path("gending-notation-" + gending.name.downcase.parameterize + "-" + gending.id.to_s) %>
            </h1>
            <p><%= strip_tags gending.description.truncate 60 %></p>
            <div class="bluebox-info-line">
              <span class="featured-post-date"><%= gending.updated_at.strftime("%B %-d, %Y") %></span>
              <%= link_to t("see_gending_detail"),
                            javanese_gending_detail_path("gending-notation-" + gending.name.downcase.parameterize + "-" + gending.id.to_s),
                            class: "badge rounded-pill bg-warning float-end" %>
            </div>
          </section>
        </div>
        <% if (index == @gendings.size - 1 || (index != 0 && index % 2 != 0)) %>
        </div>
      <% end %>
    <% end %>
    <%= will_paginate @gendings, class: 'flickr_pagination' %>
  </div>
  <div class="col-md-4">
    <aside>
      <div class="bluebox-heading">
        <h3><%= t("top_10_javanese_gending")%></h3>
      </div>
      <% @trending_gendings.each_with_index do |gending, index| %>

            <h4>
              <%= link_to "#{index + 1}. #{gending.name}",
                            javanese_gending_detail_path("gending-notation-" + gending.name.downcase.parameterize + "-" + gending.id.to_s) %>
            </h4>
            <span class="fst-italic fw-light">
              <%= t("song_updated_at", date: gending.updated_at.strftime("%B %-d, %Y")) %>
            </span>
            <%= link_to t("see_gending_detail"),
                          javanese_gending_detail_path("gending-notation-" + gending.name.downcase.parameterize + "-" + gending.id.to_s),
                          class: "badge rounded-pill bg-warning float-end" %>

      <% end %>
    </aside>
  </div>
</div>
<%= render "shared/partial_breadcrumbs" do %>
  <li class="breadcrumb-item"><%= link_to t("nav_javanese_gamelan"), javanese_gamelan_path %></li>
<% end %>
