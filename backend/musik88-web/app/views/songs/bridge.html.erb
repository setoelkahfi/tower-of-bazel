<% content_for :meta_head do %>
  <title><%= @meta_title %></title>
  <meta name="description" content="<%= @meta_description %>">
  <meta property="og:title" content="<%= @meta_title %>" />
  <meta property="og:description" content="<%= @meta_description %>" />
  <meta property="og:url" content="<%= @meta_url %>" />
<% end %>
<% content_for :breadcrumb do %>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "<%= root_url %>",
          "name": "<%= t("site_name") %>"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "<%= song_url %>",
          "name": "<%= t("nav_songs") %>"
        }
      },{
        "@type": "ListItem",
        "position": 4,
        "item": {
          "@id": "<%= song_bridge_url %>",
          "name": "<%= @song.name %>"
        }
      }]
    }
  </script>
<% end %>
<main>
  <div class="row mb-3">
    <div class="col-sm-3">
      <div class="position-sticky" style="top: 1rem;">
        <div class="text-center mt-4 mb-4">
            <% if @song.image_url %>
              <%= image_tag(
                  @song.image_url,
                  alt:"#{@song.name}",
                  size: "300x300",
                  class: "img-thumbnail img-fluid"
              ) %>
            <% else %>
              <%= image_pack_tag(
                  "image-placeholder-#{rand(0...3)}.jpg",
                  alt:"#{@song.name} image",
                  size: "300x300",
                  class: "img-thumbnail img-fluid"
              ) %>
            <% end %>
            <div class="provider-links mb-3">
              <%= link_to(
                "<i class='bi bi-#{@song.provider_type.to_s}' style='font-size: 2rem; color: blue;'></i>".html_safe,
                @song.provider_url,
                style: "padding: 0px",
                target: '__blank'
              ) %>
            </div>
            <% if @song.youtube? %>
            <div class="mb-3">
              <%= link_to(
                "<i class='bi bi-arrow-down-up'></i>".html_safe,
                @sf_link,
                class: 'btn btn-primary btn-lg px-4',
                title: 'Votes on SplitFire AI',
                target: '__blank'
              ) %>
            </div>
            <% end %>
            <div class="song-albums">
              <% @song_in_albums.each do |song| %>
                <div>
                <%= link_to(
                  song.name,
                  song.path
                  ) %> 
                </div>
              <% end %>
            </div>
        </div>
      </div>
    </div>
    <div class="col-sm-9">
      <h1 class=""><%= @page_title %></h1>
      <%= render('shared/flash_message', object: flash) %>
      <div class="chords mt-5">
        <% if @song.chord.present? %>
        <h2>
          <%= link_to(
            t('song_chords_page_title', song_name: @song.name),
            @song.chord.path
          ) %> 
        </h2>
        <% else %>
        <div class="mb-3 mt-3">
          <%= link_to('Share chord!', guitar_chord_add_path, class: 'btn btn-primary btn-lg px-4') %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
  <%= render 'shared/partial_breadcrumbs' do %>
    <li class="breadcrumb-item"><%= link_to t("nav_songs"), song_path %></li>
    <li class="breadcrumb-item"><%= link_to @song.name, song_detail_path %></li>
  <% end %>
</main>
