<% content_for :meta_head do %>
  <title><%= @meta_title %></title>
  <meta name="description" content="<%= @meta_description %>">
  <meta property="og:title" content="<%= @meta_title %>" />
  <meta property="og:description" content="<%= @meta_description %>" />
  <meta property="og:url" content="<%= @meta_url %>" />
<% end %>
<% content_for :breadcrumb do %>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "<%= root_url %>",
          "name": "<%= t("site_name") %>"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "<%= song_path %>",
          "name": "<%= t("nav_songs") %>"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "<%= most_loved_songs_url %>",
          "name": "<%= t("breadcrumb_most_loved_songs") %>"
        }
      }]
    }
  </script>
<% end %>
<main>
  <div class="row g-5">
    <div class="col-md-12">
      <h1><%= @page_title %></h1>
      <%= render('shared/flash_message', object: flash) %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <ul class="list-group">
        <% @most_loved_songs.each_with_index do |song, index| %>
          <li class="list-group-item <%= index % 2 == 0 ? 'list-group-item-primary' : ' list-group-item-warning' %>">
            <%= index + 1 %>.
            <%= link_to(
                      song.name,
                      song_detail_path(song.slug)
                ) %>
            <span class="p-2">
              <i class='bi bi-heart-fill'></i>
              <span class='badge rounded-pill bg-warning text-dark'><%= song.users_count %></span>
            </span>
            <%= link_to(
                    '<i class="bi bi-info-circle"></i>'.html_safe,
                    song_detail_path(song.slug),
                    title: t('song_menu_aside_info'),
                    class: 'float-end p-1'
                ) %>
            <%= link_to(
                    '<i class="bi bi-music-note-list"></i>'.html_safe,
                    song_chords_path(song.slug),
                    title: t('song_menu_aside_chords'),
                    class: 'float-end p-1'
                ) %>
            <%= link_to(
                    '<i class="bi bi-music-note-beamed"></i>'.html_safe,
                    song_chords_path(song.slug),
                    title: t('song_menu_aside_audio'),
                    class: 'float-end p-1'
                ) %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
  <%= render 'shared/partial_breadcrumbs' do %>
    <li class="breadcrumb-item"><%= link_to t("nav_songs"), song_path %></li>
    <li class="breadcrumb-item"><%= link_to t("breadcrumb_most_loved_songs"), most_loved_songs_url %></li>
  <% end %>
</main>