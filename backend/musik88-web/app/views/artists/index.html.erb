<% content_for :meta_head do %>
  <title><%= @meta_title %></title>
  <meta name="description" content="<%= @meta_description %>">
  <meta property="og:title" content="<%= @meta_title %>" />
  <meta property="og:description" content="<%= @meta_description %>" />
  <meta property="og:url" content="<%= artist_url %>" />
<% end %>
<% content_for :breadcrumb do %>
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "<%= root_url %>",
          "name": "<%= t("site_name") %>"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "<%= artist_url %>",
          "name": "<%= t("nav_artists") %>"
        }
      }]
    }
  </script>
<% end %>
<main>
  <div class="row g-5">
    <div class="col-md-12">
      <h1><%= @page.title if @page %></h1>
      <%= render('shared/flash_message', object: flash) %>
      <%= raw @page.page_content if @page %>
    </div>
  </div>
  <div class="row g-5">
    <div class="col-sm-9">
      <h2><%= t("h2_find_new_artists") %></h2>
      <div class="row mb-3">
        <% @artists.each_with_index do |artist, index| %>
          <div class="col-6 col-md-4 mb-3">
            <div class="card p-2 text-center">
              <%= link_to(
              image_pack_tag(
                      "image-placeholder-#{rand(0...3)}.jpg",
                      alt:"#{artist.name} image",
                      class: "img-thumbnail rounded-circle mx-auto d-block"
                  ),
              artist_detail_path(artist.slug)
            )
            %>
              <%= link_to(artist.name, artist_detail_path(artist.slug), class: 'mt-2') %>
              <div class="card-body">
                <p class="card-text"><%= strip_tags artist.description.truncate 60 %></p>
              </div>
              <div class="card-body">
                <span class="badge rounded-pill bg-primary"><%= artist.updated_at.strftime("%B %-d, %Y") %></span>
              </div>
            </div>
          </div>
        <% end %>
       </div>
      <%= will_paginate @artists, class: 'flickr_pagination' %>
    </div>
    <div class="col-sm-3">
      <div class="position-sticky" style="top: 1rem;">
        <%= render("partial_aside") %>
      </div>
    </div>
    <%= render "shared/partial_breadcrumbs" do %>
      <li class="breadcrumb-item"><%= link_to t("nav_artists"), artist_path %></li>
    <% end %>
  </main>
